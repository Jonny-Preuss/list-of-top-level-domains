#!/bin/bash
################################################################################
## "generate-all.sh"
##    (Re)generates all TLD Enumeration format files using the current
##    contents of the 'tlds.csv' file.
################################################################################
################################################################################
## this script does not have any configuration variables
################################################################################
################################################################################
################################################################################
################################################################################
################################################################################
################################################################################
################################################################################
################################################################################
################################################################################
################################################################################
################################################################################
################################################################################
################################################################################
################################################################################
################################################################################
################################################################################
################################################################################
################################################################################
################################################################################
################################################################################
## convenience variable for referring to this script
################################################################################
ME_NAME='generate-all.sh'
################################################################################
##
## introduction
##
################################################################################
echo "$ME_NAME"
echo -e "   (re)generates all TLD format files using the current contents of the 'tlds.csv' file\n"
################################################################################
##
## generate PHP format
##
################################################################################
echo "generating PHP format..."
generate-php-tld-enum.php
GEN_STATUS=$?
################################################################################
##
## enforce that PHP format generation was a reported success before proceeding
##
################################################################################
if [ "$GEN_STATUS" -ne "0" ]; then
   >&2 echo -e "$ME_NAME: cannot continue; PHP generator script failed (exit status $GEN_STATUS)"
   exit $GEN_STATUS
fi
################################################################################
##
## generate JSON format
##
################################################################################
echo "generating JSON format..."
generate-json-tld-enum.js
GEN_STATUS=$?
################################################################################
##
## enforce that JSON format generation was a reported success before proceeding
##
################################################################################
if [ "$GEN_STATUS" -ne "0" ]; then
   >&2 echo -e "$ME_NAME: cannot continue; JSON generator script failed (exit status $GEN_STATUS)"
   exit $GEN_STATUS
fi
################################################################################
##
## generate CSV (text) format
##
################################################################################
echo "generating CSV (text) format..."
generate-csv-tld-enum.js
GEN_STATUS=$?
################################################################################
##
## enforce that CSV format generation was a reported success before proceeding
##
################################################################################
if [ "$GEN_STATUS" -ne "0" ]; then
   >&2 echo -e "$ME_NAME: cannot continue; CSV (text) generator script failed (exit status $GEN_STATUS)"
   exit $GEN_STATUS
fi

################################################################################
##
## indicate success with message
##
################################################################################
echo "successfully (re)generated all TLS format files"